<script>
    // Check for saved theme (color selector)
    const savedTheme = localStorage.getItem('hubTheme');
    const currentTheme = savedTheme ? savedTheme : 'rainbow';
    document.documentElement.className = `theme-${currentTheme}`;

    // Check for saved cloak settings (defaults to Bear/NOTHING)
    const savedFavicon = localStorage.getItem('hubFavicon');
    const savedTitle = localStorage.getItem('hubTitle');
    
    // --- THIS IS THE LINE THAT CONTROLS THE DEFAULT BROWSER TAB TEXT ---
    const defaultTitle = 'NOTHING'; 
    // -------------------------------------------------------------------
    
    const faviconUrl = savedFavicon 
        ? savedFavicon 
        : "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üêª</text></svg>";
    
    // Dynamically set the page title (browser tab title)
    document.title = savedTitle ? savedTitle : defaultTitle;
    
    // Dynamically create or update the favicon link
    let link = document.querySelector("link[rel~='icon']");
    if (!link) {
        link = document.createElement('link');
        link.rel = 'icon';
        document.getElementsByTagName('head')[0].appendChild(link);
    }
    link.href = faviconUrl;
    
    // Panic Hide function (Redirects to a neutral external site)
    function panicHide() {
        window.location.replace("https://www.wikipedia.org/");
    }
</script>
